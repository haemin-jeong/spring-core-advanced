## ThreadLocal
같은 인스턴스 필드에 여러 쓰레드가 동시에 접근하게되면 동시성 문제가 발생하게 된다.  
이때 ThreadLocal을 사용하면 각 쓰레드마다 별도의 내부 저장소를 가지게 되어 같은 인스턴스의 ThreadLocal 필드에 접근해도 문제가 없게 된다.
### ThreadLocal 주의사항
WAS(톰켓)처럼 쓰레드 풀을 사용하는 경우 쓰레드 로컬의 값을 제거하지 않고 그냥 두면 심각한 문제가 발생할 수 있다.

1. 사용자1 HTTP 요청 -> 쓰레드 풀에서 쓰레드1 할당 -> ThreadLocal에 데이터 저장 -> ThreadLocal 데이터 삭제하지 않고 응답 -> 쓰레드 풀에 쓰레드1 반환
2. 사용자2 HTTP 요청 -> 쓰레드 풀에서 쓰레드1 다시 할당 -> ThreadLocal 데이터 조회 -> **사용자1이 저장했던 데이터 사용자2에게 그대로 조회**

**그렇기 때문에 요청이 끝날 때 `ThreadLocal.remove()`로 데이터를 꼭 제거 해주어야 한다.**
